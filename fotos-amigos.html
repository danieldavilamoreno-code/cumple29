<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Un recuerdo para mi</title>
  <link rel="stylesheet" href="style.css">
</head>

 <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
  const supabaseUrl = "https://vunamqmjquqqbjcuewfp.supabase.co";
  const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ1bmFtcW1qcXVxcWJqY3Vld2ZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgwNjAzMDksImV4cCI6MjA4MzYzNjMwOX0.Az5YzL_lMnaxjaR-o399mLeOctRincjK-SJGV9yHoOA";
  const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

  window.subirFoto = async function () {
    const archivo = document.getElementById("foto").files[0];

    if (!archivo) {
      alert("Por favor, elige una foto ü§ç");
      return;
    }

    const nombreArchivo = `amigo-${Date.now()}-${archivo.name}`;

    const { error } = await supabaseClient.storage
      .from("fotos-amigos")
      .upload(nombreArchivo, archivo);

    if (error) {
      alert("Error: " + error.message);
      console.error(error);
    } else {
      alert("Gracias ü§ç Tu recuerdo fue guardado con cari√±o.");
      document.getElementById("foto").value = "";
    }
  };
</script>

  
<body>

  <div class="fondo">
    <div class="contenedor">

      <h1>Un recuerdo para compartir conmigo ü§ç</h1>

      <p class="descripcion">
        Si est√°s leyendo esto es porque has sido parte de mi historia,  
        de alguna forma, en alg√∫n momento.
      </p>

      <p class="descripcion">
        Este espacio existe solo para guardar un recuerdo bonito conmigo.  
        Nada se publica, nada se comparte.  
        Yo me encargar√© de cuidarlo con el cari√±o que merece.
      </p>

      <p class="descripcion">
        Puedes subir una foto conmigo 
        y, si quieres, escribir unas palabras.  
        No tiene que ser perfecto. Solo sincero.
      </p>

      <div class="bloque-formulario">

        <input type="file" id="foto" accept="image/*">
        
        <textarea 
          rows="4" 
          placeholder="Si quieres, escribe aqu√≠ unas palabras‚Ä¶"
          disabled
        ></textarea>

        <button type="button" onclick="subirFoto()">Enviar recuerdo</button>

      </div>

      <p class="nota">
        Gracias por tomarte el tiempo ü§ç  
        Estos recuerdos formar√°n parte de un d√≠a muy especial.
      </p>

    </div>
  </div>

</body>
</html>
